# ğŸš€ çœŸæœºè°ƒè¯•å›¾ç‰‡é—®é¢˜ - å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

## âš¡ æœ€å¿«è§£å†³æ–¹æ³•ï¼ˆ1åˆ†é’Ÿï¼‰

### æ­¥éª¤ 1ï¼šå¼€å‘è€…å·¥å…·è®¾ç½®

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. ç‚¹å‡»å³ä¸Šè§’ **"è¯¦æƒ…"**
3. é€‰æ‹© **"æœ¬åœ°è®¾ç½®"** æ ‡ç­¾
4. **å‹¾é€‰ä»¥ä¸‹é€‰é¡¹**ï¼š
   ```
   âœ… ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLS ç‰ˆæœ¬ä»¥åŠ HTTPS è¯ä¹¦
   ```

### æ­¥éª¤ 2ï¼šä½¿ç”¨é¢„è§ˆåŠŸèƒ½

1. ç‚¹å‡»å·¥å…·æ çš„ **"é¢„è§ˆ"** æŒ‰é’®ï¼ˆä¸æ˜¯"çœŸæœºè°ƒè¯•"ï¼‰
2. æ‰‹æœºæ‰«ç æ‰“å¼€
3. å›¾ç‰‡åº”è¯¥å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº† âœ…

---

## ğŸ”§ ä»£ç ä¿®å¤æ–¹æ¡ˆï¼ˆå·²å®Œæˆï¼‰

æˆ‘å·²ç»ä¿®å¤äº†ä»£ç ï¼Œç°åœ¨ä½ çš„æœ‹å‹åªéœ€è¦ï¼š

### 1. æ‹‰å–æœ€æ–°ä»£ç 

```bash
git pull
```

### 2. é‡æ–°ç¼–è¯‘å°ç¨‹åº

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡» **"ç¼–è¯‘"** æŒ‰é’®

### 3. ä½¿ç”¨æ–°çš„ API

**ä¹‹å‰çš„ä»£ç ï¼ˆæœ‰é—®é¢˜ï¼‰**ï¼š
```javascript
// âŒ å›¾ç‰‡è·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„ï¼ŒçœŸæœºæ— æ³•åŠ è½½
this.swiperList = this.detail.wupintupian.split(",");
```

**ä¿®å¤åçš„ä»£ç ï¼ˆæ­£ç¡®ï¼‰**ï¼š
```javascript
// âœ… ä½¿ç”¨å…¨å±€æ–¹æ³•è½¬æ¢ä¸ºå®Œæ•´ URL
const images = this.detail.wupintupian || '';
this.swiperList = getApp().getImageUrls(images);
```

---

## ğŸ“ å…·ä½“ä¿®æ”¹ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šä¿®æ”¹ detail.js é¡µé¢

**æ‰¾åˆ° `init()` æ–¹æ³•**ï¼Œä¿®æ”¹å›¾ç‰‡å¤„ç†éƒ¨åˆ†ï¼š

```javascript
// è·å–è¯¦æƒ…
async init() {
  let res = await this.$api.info('xunwuqishi', this.id);
  this.detail = res.data;
  
  // âœ… ä¿®æ”¹è¿™é‡Œï¼šä½¿ç”¨å…¨å±€æ–¹æ³•å¤„ç†è½®æ’­å›¾
  const images = this.detail.wupintupian || '';
  this.swiperList = getApp().getImageUrls(images);
  
  // âœ… ä¿®æ”¹è¿™é‡Œï¼šä½¿ç”¨å…¨å±€æ–¹æ³•å¤„ç†å¯Œæ–‡æœ¬
  this.detail.xiangxiqingkuang = getApp().fixRichTextImages(
    this.detail.xiangxiqingkuang || ''
  );
}
```

### ç¤ºä¾‹ 2ï¼šä¿®æ”¹ WXML æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨ï¼š

```html
<!-- æ–¹æ³• 1ï¼šåœ¨ JS ä¸­å¤„ç†ï¼ˆæ¨èï¼‰ -->
<image src="{{item}}"></image>

<!-- æ–¹æ³• 2ï¼šåœ¨ WXML ä¸­è°ƒç”¨å‡½æ•° -->
<image src="{{getImageUrl(detail.fengmian)}}"></image>
```

å¦‚æœä½¿ç”¨æ–¹æ³• 2ï¼Œéœ€è¦åœ¨ JS ä¸­æ·»åŠ ï¼š

```javascript
Page({
  // ... å…¶ä»–ä»£ç 
  
  getImageUrl(path) {
    return getApp().getImageUrl(path);
  }
})
```

---

## ğŸ¯ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨

ä»¥ä¸‹é¡µé¢éœ€è¦ä¿®æ”¹ï¼ˆå¦‚æœæœ‰å›¾ç‰‡æ˜¾ç¤ºé—®é¢˜ï¼‰ï¼š

```
mp-weixin/pages/xunwuqishi/detail.js
mp-weixin/pages/shiwuzhaoling/detail.js
mp-weixin/pages/weiguiqinshi/detail.js
mp-weixin/pages/xueshengbaoxiu/detail.js
mp-weixin/pages/sushegonggao/detail.js
mp-weixin/pages/tuisuxinxi/detail.js
mp-weixin/pages/zaisuqingkuang/detail.js
mp-weixin/pages/baoxiuchuli/detail.js
mp-weixin/pages/lianxihouqin/detail.js
```

**ä¿®æ”¹æ¨¡å¼**ï¼š

åœ¨æ¯ä¸ªæ–‡ä»¶çš„ `init()` æ–¹æ³•ä¸­ï¼Œæ‰¾åˆ°ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š

```javascript
// âŒ ä¿®æ”¹å‰
this.swiperList = this.detail.wupintupian ? this.detail.wupintupian.split(",") : [];
this.detail.xiangxiqingkuang = this.detail.xiangxiqingkuang.replace(/img src/gi, "img style=\"width:100%;\" src");
```

æ”¹ä¸ºï¼š

```javascript
// âœ… ä¿®æ”¹å
this.swiperList = getApp().getImageUrls(this.detail.wupintupian || '');
this.detail.xiangxiqingkuang = getApp().fixRichTextImages(this.detail.xiangxiqingkuang || '');
```

---

## ğŸ” éªŒè¯ä¿®å¤æ˜¯å¦æˆåŠŸ

### 1. æ£€æŸ¥æ§åˆ¶å°

æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
[mini_fix] wx.request å·²æ‹¦æˆªå¹¶é”å®š
[mini_fix] å½“å‰ API åœ°å€: http://172.20.10.3:8080/nodejsn73cv/
```

### 2. æ£€æŸ¥å›¾ç‰‡ URL

åœ¨æ§åˆ¶å°è¾“å…¥ï¼š

```javascript
getApp().getImageUrl('upload/test.jpg')
```

åº”è¯¥è¿”å›ï¼š

```
"http://172.20.10.3:8080/nodejsn73cv/upload/test.jpg"
```

### 3. çœŸæœºæµ‹è¯•

1. ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ WiFi
2. ç¡®ä¿åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œï¼ˆ`node start-http.js`ï¼‰
3. ä½¿ç”¨"é¢„è§ˆ"åŠŸèƒ½æ‰«ç 
4. æŸ¥çœ‹å›¾ç‰‡æ˜¯å¦æ­£å¸¸æ˜¾ç¤º

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ä¿®æ”¹åè¿˜æ˜¯ä¸æ˜¾ç¤ºï¼Ÿ

**æ£€æŸ¥æ¸…å•**ï¼š
- [ ] ç¡®è®¤å·²æ‹‰å–æœ€æ–°ä»£ç ï¼ˆ`git pull`ï¼‰
- [ ] ç¡®è®¤å·²é‡æ–°ç¼–è¯‘å°ç¨‹åº
- [ ] ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] ç¡®è®¤ IP åœ°å€é…ç½®æ­£ç¡®ï¼ˆ`config.env.js`ï¼‰
- [ ] ä½¿ç”¨"é¢„è§ˆ"è€Œä¸æ˜¯"çœŸæœºè°ƒè¯•"
- [ ] å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"

### Q2: å¦‚ä½•æŸ¥çœ‹å®Œæ•´çš„å›¾ç‰‡ URLï¼Ÿ

åœ¨é¡µé¢çš„ `init()` æ–¹æ³•ä¸­æ·»åŠ ï¼š

```javascript
console.log('å›¾ç‰‡åˆ—è¡¨:', this.swiperList);
```

ç„¶ååœ¨æ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºã€‚

### Q3: æµè§ˆå™¨å¯ä»¥è®¿é—®å›¾ç‰‡ï¼Œå°ç¨‹åºä¸è¡Œï¼Ÿ

è¿™æ˜¯æ­£å¸¸çš„ï¼å¾®ä¿¡å°ç¨‹åºå¯¹ HTTP èµ„æºæœ‰ä¸¥æ ¼é™åˆ¶ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å¼€å‘é˜¶æ®µï¼šå‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå" + ä½¿ç”¨"é¢„è§ˆ"
2. ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ HTTPS

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **é—®é¢˜åˆ†æ**ï¼š`çœŸæœºè°ƒè¯•å›¾ç‰‡æ— æ³•æ˜¾ç¤ºé—®é¢˜åˆ†æä¸ä¿®å¤.md`
- **API ä½¿ç”¨**ï¼š`å›¾ç‰‡URLå¤„ç†ä½¿ç”¨æŒ‡å—.md`
- **SSL è¯ä¹¦**ï¼š`çœŸæœºè°ƒè¯•SSLè¯ä¹¦é—®é¢˜è§£å†³æ–¹æ¡ˆ.md`

---

## ğŸ‰ æ€»ç»“

**æœ€ç®€å•çš„æ–¹æ³•**ï¼š
1. å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"
2. ä½¿ç”¨"é¢„è§ˆ"åŠŸèƒ½ï¼ˆä¸æ˜¯"çœŸæœºè°ƒè¯•"ï¼‰
3. æ‰‹æœºæ‰«ç æ‰“å¼€

**ä»£ç ä¿®å¤æ–¹æ³•**ï¼š
1. `git pull` æ‹‰å–æœ€æ–°ä»£ç 
2. ä¿®æ”¹é¡µé¢çš„ `init()` æ–¹æ³•
3. ä½¿ç”¨ `getApp().getImageUrls()` å¤„ç†å›¾ç‰‡

**ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥è§£å†³é—®é¢˜ï¼** âœ…

---

**åˆ›å»ºæ—¶é—´**ï¼š2025-11-12  
**GitHub ä»“åº“**ï¼šhttps://github.com/licctvcctv/wechat-dormitory-management-system

